<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QMS Hub: Proje YÃ¶netim ve Ä°lerleme Paneli</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Custom Scrollbar for clean UI */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
        
        /* Chart Container Utilities as per requirements */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px; /* Max width to prevent stretching */
            height: 300px;    /* Base height */
            max-height: 400px;
            margin-left: auto;
            margin-right: auto;
        }
        @media (min-width: 1024px) {
            .chart-container { height: 350px; }
        }

        /* Animations */
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .active-nav { background-color: #e2e8f0; border-right: 4px solid #3b82f6; font-weight: 600; color: #1e293b; }
        .nav-item { transition: all 0.2s; }
        .nav-item:hover { background-color: #f1f5f9; color: #3b82f6; }
    </style>
    <!-- Chosen Palette: Slate (Backgrounds/Text) + Blue (Primary Action) + Emerald (Success) + Amber (Warning) -->
    <!-- Application Structure Plan: 
         1. Sidebar Navigation: Persistent access to Dashboard, Roadmap, Budget, Risks, and Architecture.
         2. Dynamic Header: Shows global progress and 'North Star' metric visibility.
         3. Content Views:
            - Dashboard: High-level KPIs, Critical Alerts, Project Health.
            - Roadmap (7-Day Plan): Interactive checklist/accordion for the MVP rollout (Faz 0-1).
            - Financials: Cost breakdown and interactive 'Scale' slider to predict costs based on tenant count.
            - Risks (RAID): Risk log and KVKK compliance checklist.
            - Modules: Visual breakdown of the product architecture.
         4. Logic: JS manages state (current view, completed tasks), updates Chart.js instances, and handles cost calculations.
    -->
    <!-- Visualization & Content Choices:
         - Roadmap: Accordion list with checkboxes. Goal: Track specific tasks from the PDF. Interaction: Checkboxes update global progress.
         - Financials: Doughnut Chart for Cost Distribution. Goal: Visualize fixed vs variable costs. Interaction: Hover for details.
         - Cost Projection: Bar Chart updating via Range Slider. Goal: Show cost increase vs tenant growth (PDF pg 7).
         - Risks: Color-coded Heatmap/Grid. Goal: Highlight 'High' vs 'Low' risks quickly.
         - CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. Unicode icons used for UI elements.
    -->
</head>
<body class="bg-slate-50 text-slate-800 font-sans h-screen flex overflow-hidden">

    <!-- Sidebar -->
    <aside class="w-64 bg-white border-r border-slate-200 flex-shrink-0 hidden md:flex flex-col justify-between z-10">
        <div>
            <div class="p-6 border-b border-slate-100">
                <h1 class="text-xl font-bold tracking-tight text-slate-900">QMS Hub <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full ml-1 align-top">MVP</span></h1>
                <p class="text-xs text-slate-500 mt-1">YÃ¶netim Paneli v1.0</p>
            </div>
            <nav class="p-4 space-y-1">
                <button onclick="router('dashboard')" id="nav-dashboard" class="nav-item active-nav w-full flex items-center px-4 py-3 text-sm rounded-md">
                    <span class="mr-3 text-lg">ğŸ“Š</span> Genel BakÄ±ÅŸ
                </button>
                <button onclick="router('roadmap')" id="nav-roadmap" class="nav-item w-full flex items-center px-4 py-3 text-sm rounded-md">
                    <span class="mr-3 text-lg">ğŸ“…</span> 7 GÃ¼nlÃ¼k Plan (Faz 0-1)
                </button>
                <button onclick="router('financials')" id="nav-financials" class="nav-item w-full flex items-center px-4 py-3 text-sm rounded-md">
                    <span class="mr-3 text-lg">ğŸ’°</span> BÃ¼tÃ§e & Maliyet
                </button>
                <button onclick="router('modules')" id="nav-modules" class="nav-item w-full flex items-center px-4 py-3 text-sm rounded-md">
                    <span class="mr-3 text-lg">ğŸ§©</span> ModÃ¼l Mimarisi
                </button>
                <button onclick="router('risks')" id="nav-risks" class="nav-item w-full flex items-center px-4 py-3 text-sm rounded-md">
                    <span class="mr-3 text-lg">ğŸ›¡ï¸</span> Risk & KVKK
                </button>
            </nav>
        </div>
        <div class="p-4 bg-slate-50 border-t border-slate-200">
            <div class="text-xs font-semibold text-slate-500 mb-2">PROJE DURUMU</div>
            <div class="flex items-center space-x-2 mb-2">
                <span class="w-2 h-2 bg-emerald-500 rounded-full animate-pulse"></span>
                <span class="text-sm font-medium text-slate-700">Sistem SaÄŸlÄ±klÄ±</span>
            </div>
            <div class="w-full bg-slate-200 rounded-full h-2">
                <div id="sidebar-progress" class="bg-blue-600 h-2 rounded-full transition-all duration-500" style="width: 0%"></div>
            </div>
            <div class="flex justify-between text-xs text-slate-500 mt-1">
                <span>Ä°lerleme</span>
                <span id="sidebar-percent">0%</span>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 overflow-y-auto relative">
        <!-- Mobile Header -->
        <header class="md:hidden bg-white border-b border-slate-200 p-4 flex justify-between items-center sticky top-0 z-20">
            <h1 class="text-lg font-bold text-slate-900">QMS Hub</h1>
            <button onclick="toggleMobileMenu()" class="text-slate-600 focus:outline-none text-xl">â˜°</button>
        </header>

        <!-- Dynamic Content Container -->
        <div id="app-content" class="p-4 md:p-8 max-w-7xl mx-auto">
            <!-- Content Injected via JS -->
        </div>
    </main>

    <!-- JavaScript Logic -->
    <script>
        // --- DATA STORE (Extracted from PDF Reports) ---
        const projectData = {
            meta: {
                owner: "Ceyhun Bey",
                budget_target: "3.000 TL/ay (MVP Ä°ÅŸletim)",
                risk_appetite: "DÃ¼ÅŸÃ¼k",
                north_star: "AylÄ±k Kapanan CAPA SayÄ±sÄ±",
                version: "v1.0 (24.12.2025)"
            },
            roadmap: [
                {
                    day: "GÃ¼n 1: HazÄ±rlÄ±k",
                    status: "TamamlandÄ±",
                    items: [
                        { id: 101, text: "Make.com hesap aÃ§Ä±lÄ±ÅŸÄ± (Core plan)", done: true },
                        { id: 102, text: "Airtable veritabanÄ± ÅŸemasÄ± kurulumu", done: true },
                        { id: 103, text: "Google Drive klasÃ¶r yapÄ±sÄ± (Taslak/YayÄ±n)", done: true }
                    ]
                },
                {
                    day: "GÃ¼n 2-3: Ã‡ekirdek (DokÃ¼man)",
                    status: "Devam Ediyor",
                    items: [
                        { id: 201, text: "Gamma.app ÅŸablon entegrasyonu", done: false },
                        { id: 202, text: "DokÃ¼man talep formu (Softr/Airtable)", done: false },
                        { id: 203, text: "PDF dÃ¶nÃ¼ÅŸtÃ¼rme otomasyonu (ConvertAPI)", done: false }
                    ]
                },
                {
                    day: "GÃ¼n 4-5: Denetim & CAPA",
                    status: "Beklemede",
                    items: [
                        { id: 401, text: "Denetim soru havuzu yÃ¼kleme", done: false },
                        { id: 402, text: "CAPA form tetikleyicileri (Webhook)", done: false },
                        { id: 403, text: "Aksiyon takip hatÄ±rlatÄ±cÄ±larÄ± (Gmail)", done: false }
                    ]
                },
                {
                    day: "GÃ¼n 6-7: Test & Launch",
                    status: "Beklemede",
                    items: [
                        { id: 601, text: "UÃ§tan uca pilot test (Happy Path)", done: false },
                        { id: 602, text: "S6 SaÄŸlÄ±k KontrolÃ¼ kurulumu", done: false },
                        { id: 603, text: "YÃ¶netici Ã–zeti rapor ÅŸablonu", done: false }
                    ]
                }
            ],
            financials: {
                fixed: [
                    { item: "Make.com (Core)", cost: 9, currency: "USD" },
                    { item: "Airtable (Free/Team)", cost: 0, currency: "USD", note: "MVP iÃ§in Free, Scale iÃ§in $20" },
                    { item: "Gamma (Plus)", cost: 8, currency: "USD" },
                    { item: "ConvertAPI", cost: 0, currency: "USD", note: "Free tier yeterli" }
                ],
                variable_factor: 0.5, // USD per tenant estimated overhead
                currency_rate: 35.0 // Approximate USD/TL rate for display
            },
            risks: [
                { severity: "YÃ¼ksek", text: "Otomasyon KotasÄ± AÅŸÄ±mÄ±", mitigation: "S6 SaÄŸlÄ±k kontrolÃ¼ + Plan yÃ¼kseltme tetikleyicisi" },
                { severity: "YÃ¼ksek", text: "KVKK/Veri Ä°hlali", mitigation: "Minimale veri ilkesi + 90 gÃ¼n otomatik silme" },
                { severity: "Orta", text: "KullanÄ±cÄ± Benimseme (Adoption)", mitigation: "Onboarding checklist + Basit UI" },
                { severity: "DÃ¼ÅŸÃ¼k", text: "API Kesintisi", mitigation: "Hata yÃ¶netimi senaryolarÄ± (Error Handlers)" }
            ]
        };

        // --- STATE MANAGEMENT ---
        let state = {
            currentView: 'dashboard',
            completedTasks: [101, 102, 103], // IDs of checked items
            simulatedTenants: 5 // For budget calculator
        };

        // --- CORE FUNCTIONS ---

        function init() {
            renderDashboard();
            updateSidebarProgress();
        }

        function router(viewName) {
            state.currentView = viewName;
            
            // Update Nav Styles
            document.querySelectorAll('.nav-item').forEach(el => {
                el.classList.remove('active-nav');
                el.classList.remove('text-blue-600');
            });
            const activeBtn = document.getElementById(`nav-${viewName}`);
            if(activeBtn) activeBtn.classList.add('active-nav');

            // Render Content
            const contentDiv = document.getElementById('app-content');
            contentDiv.innerHTML = ''; // Clear current
            contentDiv.classList.remove('fade-in');
            void contentDiv.offsetWidth; // Trigger reflow
            contentDiv.classList.add('fade-in');

            switch(viewName) {
                case 'dashboard': renderDashboard(); break;
                case 'roadmap': renderRoadmap(); break;
                case 'financials': renderFinancials(); break;
                case 'modules': renderModules(); break;
                case 'risks': renderRisks(); break;
            }
        }

        function toggleTask(id) {
            if (state.completedTasks.includes(id)) {
                state.completedTasks = state.completedTasks.filter(t => t !== id);
            } else {
                state.completedTasks.push(id);
            }
            updateSidebarProgress();
            // Re-render roadmap if active to show checked state, or just update DOM directly for speed
            if (state.currentView === 'roadmap') renderRoadmap(); 
            if (state.currentView === 'dashboard') renderDashboard();
        }

        function updateSidebarProgress() {
            let totalTasks = 0;
            projectData.roadmap.forEach(day => totalTasks += day.items.length);
            let doneCount = state.completedTasks.length;
            let percent = Math.round((doneCount / totalTasks) * 100);

            document.getElementById('sidebar-progress').style.width = `${percent}%`;
            document.getElementById('sidebar-percent').innerText = `${percent}%`;
        }

        // --- RENDERERS ---

        function renderDashboard() {
            const container = document.getElementById('app-content');
            
            // Stats Calculation
            let totalBudget = projectData.meta.budget_target;
            let currentCostUSD = projectData.financials.fixed.reduce((a,b) => a + b.cost, 0);
            let currentCostTL = Math.round(currentCostUSD * projectData.financials.currency_rate);

            container.innerHTML = `
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-slate-800">Proje Kontrol Paneli</h2>
                    <p class="text-slate-500">Faz 0-1 MVP Hedefleri ve AnlÄ±k Durum</p>
                </div>

                <!-- KPI Cards -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100 flex flex-col justify-between">
                        <div>
                            <div class="text-sm font-medium text-slate-400 uppercase">Hedef BÃ¼tÃ§e (AylÄ±k)</div>
                            <div class="text-2xl font-bold text-slate-800 mt-2">${totalBudget}</div>
                        </div>
                        <div class="mt-4 text-sm text-emerald-600 font-medium">âœ… Åu anki Tahmin: ~${currentCostTL} TL</div>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100 flex flex-col justify-between">
                        <div>
                            <div class="text-sm font-medium text-slate-400 uppercase">North Star MetriÄŸi</div>
                            <div class="text-lg font-bold text-slate-800 mt-2 leading-tight">AylÄ±k Kapanan CAPA</div>
                        </div>
                        <div class="mt-4 text-xs text-slate-500">Kalite dÃ¶ngÃ¼sÃ¼nÃ¼n tamamlanma hÄ±zÄ±</div>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100 flex flex-col justify-between">
                        <div>
                            <div class="text-sm font-medium text-slate-400 uppercase">Kalan SÃ¼re (MVP)</div>
                            <div class="text-2xl font-bold text-blue-600 mt-2">4 GÃ¼n</div>
                        </div>
                        <div class="mt-4 text-xs text-slate-500">Planlanan Lansman: 7. GÃ¼n</div>
                    </div>
                </div>

                <!-- Main Layout: Chart + Quick Actions -->
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <!-- Progress Chart -->
                    <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-sm border border-slate-100">
                        <h3 class="font-bold text-lg mb-4 text-slate-800">MVP Tamamlanma Durumu</h3>
                        <p class="text-sm text-slate-500 mb-4">Bu grafik, Faz 0-1 yol haritasÄ±ndaki gÃ¶revlerin gerÃ§ek zamanlÄ± tamamlanma oranÄ±nÄ± gÃ¶sterir.</p>
                        <div class="chart-container">
                            <canvas id="dashboardChart"></canvas>
                        </div>
                    </div>

                    <!-- Action Center -->
                    <div class="space-y-6">
                        <!-- Critical Next Steps -->
                        <div class="bg-amber-50 p-6 rounded-xl border border-amber-100">
                            <h3 class="font-bold text-amber-800 mb-3 flex items-center">
                                <span class="mr-2">âš ï¸</span> Kritik UyarÄ±lar
                            </h3>
                            <ul class="space-y-2 text-sm text-amber-900">
                                <li class="flex items-start">
                                    <span class="mr-2">â€¢</span>
                                    <span>KVKK AydÄ±nlatma metni henÃ¼z onboarding formuna eklenmedi.</span>
                                </li>
                                <li class="flex items-start">
                                    <span class="mr-2">â€¢</span>
                                    <span>Make.com "Core" planÄ± limitlerine (%80) yaklaÅŸÄ±ldÄ±.</span>
                                </li>
                            </ul>
                            <button onclick="router('risks')" class="mt-4 w-full bg-amber-100 text-amber-800 py-2 rounded text-sm font-medium hover:bg-amber-200 transition">Risk Logunu AÃ§</button>
                        </div>

                        <!-- Quick Links -->
                        <div class="bg-white p-6 rounded-xl border border-slate-100 shadow-sm">
                            <h3 class="font-bold text-slate-800 mb-3">HÄ±zlÄ± EriÅŸim</h3>
                            <div class="space-y-2">
                                <button onclick="router('roadmap')" class="w-full text-left px-3 py-2 text-sm rounded hover:bg-slate-50 text-slate-600 flex justify-between items-center group">
                                    <span>BugÃ¼nÃ¼n GÃ¶revlerini GÃ¶r</span>
                                    <span class="group-hover:translate-x-1 transition">â†’</span>
                                </button>
                                <button onclick="router('financials')" class="w-full text-left px-3 py-2 text-sm rounded hover:bg-slate-50 text-slate-600 flex justify-between items-center group">
                                    <span>Maliyet SimÃ¼lasyonu</span>
                                    <span class="group-hover:translate-x-1 transition">â†’</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            // Init Chart
            setTimeout(() => {
                const ctx = document.getElementById('dashboardChart').getContext('2d');
                
                // Calculate data for chart
                const labels = projectData.roadmap.map(r => r.day.split(':')[0]);
                const dataPoints = projectData.roadmap.map(r => {
                    const total = r.items.length;
                    const done = r.items.filter(i => state.completedTasks.includes(i.id)).length;
                    return (done / total) * 100;
                });

                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Tamamlanma OranÄ± (%)',
                            data: dataPoints,
                            backgroundColor: '#3b82f6',
                            borderRadius: 6,
                            barThickness: 40
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false }
                        },
                        scales: {
                            y: { beginAtZero: true, max: 100 }
                        }
                    }
                });
            }, 50);
        }

        function renderRoadmap() {
            const container = document.getElementById('app-content');
            
            let html = `
                <div class="mb-6 flex justify-between items-end">
                    <div>
                        <h2 class="text-3xl font-bold text-slate-800">7 GÃ¼nlÃ¼k Uygulama PlanÄ± (Faz 0-1)</h2>
                        <p class="text-slate-500 mt-2">Minimum kod, maksimum otomasyon prensibiyle 7 gÃ¼nlÃ¼k sprint.</p>
                    </div>
                    <div class="text-right">
                        <span class="text-xs font-bold text-slate-400 uppercase tracking-wider">Hedef BitiÅŸ</span>
                        <div class="text-lg font-bold text-slate-800">7. GÃ¼n Sonu</div>
                    </div>
                </div>

                <div class="space-y-6">
            `;

            projectData.roadmap.forEach((phase, index) => {
                const isDone = phase.items.every(i => state.completedTasks.includes(i.id));
                const statusColor = isDone ? 'bg-emerald-100 text-emerald-800' : 'bg-blue-50 text-blue-800';
                
                html += `
                    <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden transition hover:shadow-md">
                        <div class="p-4 bg-slate-50 border-b border-slate-100 flex flex-col md:flex-row md:items-center justify-between">
                            <div class="flex items-center">
                                <span class="w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold mr-3 ${isDone ? 'bg-emerald-500 text-white' : 'bg-blue-600 text-white'}">
                                    ${isDone ? 'âœ“' : index + 1}
                                </span>
                                <h3 class="font-bold text-lg text-slate-800">${phase.day}</h3>
                            </div>
                            <span class="mt-2 md:mt-0 px-3 py-1 rounded-full text-xs font-bold ${statusColor}">
                                ${isDone ? 'TAMAMLANDI' : phase.status}
                            </span>
                        </div>
                        <div class="p-4">
                            <ul class="space-y-3">
                `;

                phase.items.forEach(item => {
                    const checked = state.completedTasks.includes(item.id) ? 'checked' : '';
                    const strike = state.completedTasks.includes(item.id) ? 'line-through text-slate-400' : 'text-slate-700';
                    
                    html += `
                        <li class="flex items-center group">
                            <input type="checkbox" id="task-${item.id}" ${checked} 
                                onchange="toggleTask(${item.id})"
                                class="w-5 h-5 text-blue-600 rounded border-slate-300 focus:ring-blue-500 cursor-pointer transition">
                            <label for="task-${item.id}" class="ml-3 text-sm ${strike} group-hover:text-blue-600 transition cursor-pointer select-none">
                                ${item.text}
                            </label>
                        </li>
                    `;
                });

                html += `
                            </ul>
                        </div>
                    </div>
                `;
            });

            html += `
                </div>
                
                <!-- Anti-Patterns Section from PDF -->
                <div class="mt-12 border-t border-slate-200 pt-8">
                    <h3 class="text-xl font-bold text-slate-800 mb-4">ğŸš« YapÄ±lmayacaklar (Non-Goals)</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-red-50 p-4 rounded border border-red-100 text-red-900 text-sm">
                            <strong>Ã–zel Backend Yazmak:</strong> MVP iÃ§in sadece Make.com + Airtable kullanÄ±lacak.
                        </div>
                        <div class="bg-red-50 p-4 rounded border border-red-100 text-red-900 text-sm">
                            <strong>Full-Text Search:</strong> Faz 0'da yok, Airtable filtreleri yeterli.
                        </div>
                    </div>
                </div>
            `;

            container.innerHTML = html;
        }

        function renderFinancials() {
            const container = document.getElementById('app-content');
            
            // Calculate Initial Costs
            const fixedCostUSD = projectData.financials.fixed.reduce((a,b) => a + b.cost, 0);
            
            container.innerHTML = `
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-slate-800">Maliyet & BÃ¼tÃ§e Analizi</h2>
                    <p class="text-slate-500">Sabit giderler ve Tenant baÅŸÄ±na deÄŸiÅŸken maliyet simÃ¼lasyonu.</p>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- Cost Simulator -->
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100">
                        <h3 class="font-bold text-lg mb-6 text-slate-800">BÃ¼yÃ¼me Senaryosu SimÃ¼latÃ¶rÃ¼</h3>
                        
                        <div class="mb-8">
                            <label class="block text-sm font-medium text-slate-700 mb-2">Aktif Tenant SayÄ±sÄ±: <span id="tenant-display" class="font-bold text-blue-600 text-lg">${state.simulatedTenants}</span></label>
                            <input type="range" min="1" max="100" value="${state.simulatedTenants}" id="tenant-slider" 
                                class="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-blue-600">
                            <div class="flex justify-between text-xs text-slate-400 mt-2">
                                <span>MVP (1-10)</span>
                                <span>BÃ¼yÃ¼me (10-50)</span>
                                <span>Ã–lÃ§ek (50+)</span>
                            </div>
                        </div>

                        <div class="bg-slate-50 p-4 rounded-lg border border-slate-200">
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-slate-600">Sabit AltyapÄ± Maliyeti:</span>
                                <span class="font-bold">$${fixedCostUSD}/ay</span>
                            </div>
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-slate-600">DeÄŸiÅŸken Maliyet (Tenant baÅŸÄ±):</span>
                                <span class="font-bold">$${projectData.financials.variable_factor}/ay</span>
                            </div>
                            <div class="border-t border-slate-300 my-2 pt-2 flex justify-between items-center text-lg">
                                <span class="font-bold text-slate-800">Toplam Tahmini Gider:</span>
                                <span class="font-bold text-blue-600" id="total-cost-usd">$0</span>
                            </div>
                            <div class="text-right text-xs text-slate-400 mt-1">
                                (~<span id="total-cost-tl">0</span> TL)
                            </div>
                        </div>

                        <div class="mt-6 text-xs text-slate-500">
                            <strong>Maliyet KuralÄ± (PDF Pg 7):</strong> Yeni modÃ¼l eklemeden Ã¶nce "pilot baÅŸÄ±na gelir >= ek maliyet x 3" eÅŸiÄŸi aranÄ±r.
                        </div>
                    </div>

                    <!-- Breakdown Chart -->
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100 flex flex-col">
                        <h3 class="font-bold text-lg mb-4 text-slate-800">AltyapÄ± Maliyet DaÄŸÄ±lÄ±mÄ±</h3>
                        <div class="chart-container">
                            <canvas id="financialChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Tools Table -->
                <div class="mt-8 bg-white rounded-xl shadow-sm border border-slate-100 overflow-hidden">
                    <div class="px-6 py-4 border-b border-slate-100 bg-slate-50 font-bold text-slate-700">
                        KullanÄ±lan AraÃ§lar ve Maliyetleri
                    </div>
                    <table class="w-full text-sm text-left">
                        <thead class="text-xs text-slate-500 uppercase bg-slate-50 border-b">
                            <tr>
                                <th class="px-6 py-3">AraÃ§</th>
                                <th class="px-6 py-3">Plan</th>
                                <th class="px-6 py-3">Maliyet (Ay)</th>
                                <th class="px-6 py-3">Not</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-slate-100">
                            ${projectData.financials.fixed.map(t => `
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-4 font-medium text-slate-900">${t.item}</td>
                                    <td class="px-6 py-4 text-slate-500">MVP / Standart</td>
                                    <td class="px-6 py-4 text-emerald-600 font-bold">$${t.cost}</td>
                                    <td class="px-6 py-4 text-slate-400 text-xs">${t.note || '-'}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
            `;

            // Setup Logic
            setTimeout(() => {
                const slider = document.getElementById('tenant-slider');
                const display = document.getElementById('tenant-display');
                const totalUsdEl = document.getElementById('total-cost-usd');
                const totalTlEl = document.getElementById('total-cost-tl');

                const updateCost = () => {
                    const tenants = parseInt(slider.value);
                    state.simulatedTenants = tenants;
                    display.innerText = tenants;
                    
                    // Logic: Base cost increases slightly if tenants > 10 (Plan upgrade simulation)
                    let adjustedFixed = fixedCostUSD;
                    if(tenants > 10) adjustedFixed += 20; // Airtable starts costing
                    if(tenants > 50) adjustedFixed += 50; // Enterprise database need
                    
                    const totalUSD = adjustedFixed + (tenants * projectData.financials.variable_factor);
                    const totalTL = totalUSD * projectData.financials.currency_rate;

                    totalUsdEl.innerText = `$${totalUSD.toFixed(1)}`;
                    totalTlEl.innerText = Math.round(totalTL).toLocaleString();
                };

                slider.addEventListener('input', updateCost);
                updateCost(); // Initial call

                // Chart
                const ctx = document.getElementById('financialChart').getContext('2d');
                new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: projectData.financials.fixed.map(f => f.item),
                        datasets: [{
                            data: projectData.financials.fixed.map(f => f.cost > 0 ? f.cost : 1), // 1 for visual if free
                            backgroundColor: ['#6366f1', '#10b981', '#f59e0b', '#ef4444'],
                            borderWidth: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { position: 'bottom' },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        let val = projectData.financials.fixed[context.dataIndex].cost;
                                        return val === 0 ? 'Ãœcretsiz (ÅŸimdilik)' : `$${val}`;
                                    }
                                }
                            }
                        }
                    }
                });
            }, 50);
        }

        function renderRisks() {
            const container = document.getElementById('app-content');
            container.innerHTML = `
                 <div class="mb-8">
                    <h2 class="text-3xl font-bold text-slate-800">Risk, Uyum ve RAID Log</h2>
                    <p class="text-slate-500">KVKK tasarÄ±m prensipleri ve potansiyel proje riskleri.</p>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                    <!-- KVKK Section -->
                    <div class="bg-blue-50 p-6 rounded-xl border border-blue-100">
                        <h3 class="font-bold text-blue-900 mb-4 text-xl">ğŸ›¡ï¸ KVKK TasarÄ±m Prensipleri (BÃ¶lÃ¼m 10.1)</h3>
                        <ul class="space-y-4">
                            <li class="flex gap-3">
                                <span class="bg-blue-200 text-blue-800 w-6 h-6 rounded flex items-center justify-center text-xs font-bold flex-shrink-0">1</span>
                                <div>
                                    <strong class="text-blue-900 block">Minimum Veri</strong>
                                    <span class="text-sm text-blue-800/80">Sadece sÃ¼reÃ§ iÃ§in gerekli alanlar; hassas kiÅŸisel veri toplanmaz.</span>
                                </div>
                            </li>
                            <li class="flex gap-3">
                                <span class="bg-blue-200 text-blue-800 w-6 h-6 rounded flex items-center justify-center text-xs font-bold flex-shrink-0">2</span>
                                <div>
                                    <strong class="text-blue-900 block">Saklama SÃ¼resi</strong>
                                    <span class="text-sm text-blue-800/80">Tenant kapatÄ±ldÄ±ÄŸÄ±nda 90 gÃ¼n sonra otomatik silme.</span>
                                </div>
                            </li>
                            <li class="flex gap-3">
                                <span class="bg-blue-200 text-blue-800 w-6 h-6 rounded flex items-center justify-center text-xs font-bold flex-shrink-0">3</span>
                                <div>
                                    <strong class="text-blue-900 block">Veri Ä°hracÄ± (Export)</strong>
                                    <span class="text-sm text-blue-800/80">MÃ¼ÅŸteri talebinde 24-48 saat iÃ§inde export saÄŸlanÄ±r.</span>
                                </div>
                            </li>
                        </ul>
                    </div>

                    <!-- Quality Assurance -->
                    <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                        <h3 class="font-bold text-slate-800 mb-4 text-xl">âœ… Kalite GÃ¼vence Hedefleri</h3>
                        <div class="space-y-4">
                            <div class="border-l-4 border-emerald-500 pl-4 py-1">
                                <div class="text-sm text-slate-500 uppercase font-bold">Hata YanÄ±t SÃ¼resi</div>
                                <div class="text-lg text-slate-800 font-medium">Kritik uyarÄ± â‰¤ 5 dk</div>
                            </div>
                            <div class="border-l-4 border-emerald-500 pl-4 py-1">
                                <div class="text-sm text-slate-500 uppercase font-bold">Pilot Test SenaryolarÄ±</div>
                                <div class="text-lg text-slate-800 font-medium">Onboarding, DokÃ¼man Ã¼retimi, CAPA kapanÄ±ÅŸÄ±</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- RAID Log Table -->
                <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                    <div class="px-6 py-4 border-b border-slate-100 flex justify-between items-center bg-slate-50">
                        <span class="font-bold text-slate-700">Aktif Risk KayÄ±tlarÄ± (RAID)</span>
                    </div>
                    <table class="w-full text-sm text-left">
                        <thead class="text-xs text-slate-500 uppercase bg-slate-50 border-b">
                            <tr>
                                <th class="px-6 py-3">Risk</th>
                                <th class="px-6 py-3">Ã–nem</th>
                                <th class="px-6 py-3">Azaltma PlanÄ± (Mitigation)</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-slate-100">
                            ${projectData.risks.map(risk => {
                                let badgeColor = risk.severity === 'YÃ¼ksek' ? 'bg-red-100 text-red-800' : 
                                                 risk.severity === 'Orta' ? 'bg-amber-100 text-amber-800' : 'bg-slate-100 text-slate-800';
                                return `
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-4 font-medium text-slate-900">${risk.text}</td>
                                    <td class="px-6 py-4"><span class="${badgeColor} px-2 py-1 rounded text-xs font-bold">${risk.severity}</span></td>
                                    <td class="px-6 py-4 text-slate-600">${risk.mitigation}</td>
                                </tr>
                                `;
                            }).join('')}
                        </tbody>
                    </table>
                </div>
            `;
        }

        function renderModules() {
             const container = document.getElementById('app-content');
             container.innerHTML = `
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-slate-800">ÃœrÃ¼n ModÃ¼l Mimarisi</h2>
                    <p class="text-slate-500">QMS Hub'Ä±n modÃ¼ler yapÄ±sÄ± ve MVP kapsamÄ±ndaki bileÅŸenler.</p>
                </div>

                <!-- Core Visual -->
                <div class="flex flex-col md:flex-row gap-6 mb-12">
                    <!-- Central Core -->
                    <div class="flex-1 bg-white p-8 rounded-xl shadow-md border-2 border-blue-200 relative overflow-hidden group">
                        <div class="absolute top-0 right-0 bg-blue-600 text-white text-xs font-bold px-3 py-1 rounded-bl">FAZ 0-1 (AKTÄ°F)</div>
                        <div class="text-center mb-6">
                            <div class="text-6xl mb-4">ğŸ§ </div>
                            <h3 class="text-2xl font-bold text-slate-800">Ã‡ekirdek ModÃ¼l</h3>
                            <p class="text-slate-500 text-sm mt-2">Shared DB â€¢ Auth â€¢ Audit Log</p>
                        </div>
                        <div class="space-y-3">
                            <div class="p-3 bg-slate-50 rounded border border-slate-200 text-center font-medium hover:bg-blue-50 transition">ğŸ“„ DokÃ¼man YÃ¶netimi (ISO 9001)</div>
                            <div class="p-3 bg-slate-50 rounded border border-slate-200 text-center font-medium hover:bg-blue-50 transition">ğŸ” Ä°Ã§ Denetim Motoru</div>
                            <div class="p-3 bg-slate-50 rounded border border-slate-200 text-center font-medium hover:bg-blue-50 transition">âš¡ CAPA Otomasyonu</div>
                        </div>
                    </div>

                    <!-- Future Phases (Faded) -->
                    <div class="flex-1 bg-slate-50 p-8 rounded-xl border border-slate-200 border-dashed relative opacity-75 hover:opacity-100 transition duration-300">
                        <div class="absolute top-0 right-0 bg-slate-300 text-slate-700 text-xs font-bold px-3 py-1 rounded-bl">FAZ 2-3 (GELECEK)</div>
                        <div class="text-center mb-6">
                            <div class="text-6xl mb-4 grayscale">ğŸš€</div>
                            <h3 class="text-xl font-bold text-slate-600">BÃ¼yÃ¼me & Ã–lÃ§ek</h3>
                        </div>
                        <div class="space-y-3">
                            <div class="p-3 bg-white rounded border border-slate-200 text-center text-slate-500 text-sm">ğŸ“ EÄŸitim ModÃ¼lÃ¼</div>
                            <div class="p-3 bg-white rounded border border-slate-200 text-center text-slate-500 text-sm">ğŸšš TedarikÃ§i DeÄŸerlendirme</div>
                            <div class="p-3 bg-white rounded border border-slate-200 text-center text-slate-500 text-sm">ğŸ¤– AI Asistan (Faz 3)</div>
                        </div>
                    </div>
                </div>

                <!-- Process Flow Description -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100">
                    <h3 class="font-bold text-lg mb-4 text-slate-800">MVP Ä°ÅŸleyiÅŸ AkÄ±ÅŸÄ± (Happy Path)</h3>
                    <div class="flex flex-col md:flex-row items-center justify-between text-center text-sm">
                        <div class="p-4 flex-1">
                            <div class="text-3xl mb-2">ğŸ“</div>
                            <div class="font-bold">1. Onboarding</div>
                            <div class="text-slate-500 mt-1">Form doldurulur, KVKK onayÄ± alÄ±nÄ±r.</div>
                        </div>
                        <div class="text-2xl text-slate-300">âœ</div>
                        <div class="p-4 flex-1">
                            <div class="text-3xl mb-2">âš™ï¸</div>
                            <div class="font-bold">2. Ãœretim (Make)</div>
                            <div class="text-slate-500 mt-1">Sistem dokÃ¼man setini ve klasÃ¶rleri oluÅŸturur.</div>
                        </div>
                        <div class="text-2xl text-slate-300">âœ</div>
                        <div class="p-4 flex-1">
                            <div class="text-3xl mb-2">ğŸ“©</div>
                            <div class="font-bold">3. Teslimat</div>
                            <div class="text-slate-500 mt-1">MÃ¼ÅŸteriye e-posta ile linkler iletilir.</div>
                        </div>
                        <div class="text-2xl text-slate-300">âœ</div>
                        <div class="p-4 flex-1">
                            <div class="text-3xl mb-2">ğŸ”„</div>
                            <div class="font-bold">4. DÃ¶ngÃ¼ (CAPA)</div>
                            <div class="text-slate-500 mt-1">Denetim bulgularÄ± aksiyona dÃ¶nÃ¼ÅŸÃ¼r.</div>
                        </div>
                    </div>
                </div>
             `;
        }

        // --- MOBILE MENU ---
        function toggleMobileMenu() {
            const sidebar = document.querySelector('aside');
            sidebar.classList.toggle('hidden');
            sidebar.classList.toggle('absolute');
            sidebar.classList.toggle('h-full');
            sidebar.classList.toggle('w-full');
        }

        // --- INIT ---
        window.addEventListener('DOMContentLoaded', init);

    </script>
</body>
</html>